<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> THM x86 Architecture Overview | NonoHM </title> <meta name="author" content="NonoHM "> <meta name="description" content="Welcome to my personnal website. I am currently a 2nd year student in the " but r et t program. i like doing sports and music besides learning new things in it.> <meta name="keywords" content="jekyll, jekyll-theme, portfolio-website, writeups, projects"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link defer href="/assets/css/bootstrap-toc.min.css?6f5af0bb9aab25d79b2448143cbeaa88" rel="stylesheet"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%E2%9A%9B%EF%B8%8F&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://nonohm.github.io/blog/2024/THM-x86-Architecture-Overview/"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script src="/assets/js/theme.js?0afe9f0ae161375728f7bcc5eb5b4ab4"></script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> NonoHM </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about </a> </li> <li class="nav-item "> <a class="nav-link" href="/blog/">blog </a> </li> <li class="nav-item "> <a class="nav-link" href="/projects/">projects </a> </li> <li class="nav-item "> <a class="nav-link" href="/repositories/">repositories </a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="fa-solid fa-moon"></i> <i class="fa-solid fa-sun"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="row"> <div class="col-sm-3"> <nav id="toc-sidebar" class="sticky-top"></nav> </div> <div class="col-sm-9"> <div class="post"> <header class="post-header"> <h1 class="post-title">THM x86 Architecture Overview</h1> <p class="post-meta"> April 06, 2024 • NonoHM </p> <p class="post-tags"> <a href="/blog/2024"> <i class="fa-solid fa-calendar fa-sm"></i> 2024 </a>   ·   <a href="/blog/tag/thm"> <i class="fa-solid fa-hashtag fa-sm"></i> THM</a>   <a href="/blog/tag/malware-analysis"> <i class="fa-solid fa-hashtag fa-sm"></i> Malware Analysis</a>   <a href="/blog/tag/x86-architecture"> <i class="fa-solid fa-hashtag fa-sm"></i> x86 Architecture</a>   </p> </header> <article class="post-content"> <div id="markdown-content"> <h2 id="task-1---introduction">Task 1 - Introduction</h2> <p>Because malware works by abusing the way systems are designed, it is essential to know the architecture of the systems they are running in, in order to know how they work.</p> <h3 id="learning-objectives">Learning Objectives</h3> <p>Here are the topics covered in this room:</p> <ol> <li>Overview of CPU architecture and its components</li> <li>Different types of CPU registers and their usage</li> <li>Memory layout as viewed by a program</li> <li>Stack layout and stack registers</li> </ol> <h2 id="task-2---cpu-architecture-overview">Task 2 - CPU Architecture Overview</h2> <p>The CPU Architecture that is most widely used is derived from the Von Neumann Architecture.</p> <figure> <picture> <img src="/assets/img/images/thm_x86_architecture_overview/B1dx6o0y0.png" class="img-fluid rounded z-depth-1 bg-white" width="100%" height="auto" title="Von Neumann Architecture" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <p>Von Neumann architecture is composed of three main components:</p> <ul> <li> <strong>CPU (Central Processing Unit):</strong>: Executes instructions and controls operations of the computer.</li> <li> <strong>Main Memory (RAM)</strong>: Stores data and instructions the CPU needs to operate on. It is where the code and data for a program to run, is located.</li> <li> <strong>Input/Output Devices</strong>: Allows interaction with the computer like keyboards, monitors and storage devices.</li> </ul> <p>The CPU here has three components:</p> <ul> <li> <strong>ALU (Arithmetic Logic Unit)</strong>: Executes the instructions fetched from memory. Results are then stored in either Registers or Memory.</li> <li> <strong>Control Unit</strong>: Gets instructions from the Main Memory, interprets them to understand what operation needs to be performed, and directs them to the ALU. It also generates control signals to coordinate activities of other parts of the CPU and ensures that instructions are executed in the correct sequence and at the right timing.</li> <li> <strong>Registers</strong>: Registers are CPU’s strorage. While being signifanctly smaller than Main memory, Registers help save time in executing instructions by placing important data in direct access to the CPU. In Registers, there is also a specific register where is located the Instruction Pointer (IP). It holds the memory address of the next instruction to be fetched and executed during the operation of a program. IP is called EIP (Extended Instruction Pointers) in 32-bit and RIP (Register Instruction Pointer) in 64-bit.</li> </ul> <p>In short, when a program has to be executed, it is loaded into the memory. From there, the Control Unit fetches one instruction at a time using the Instruction Pointer Register, and the Arithmetic Logic Unit executes it. The results are stored in either the Registers or the Memory.</p> <h3 id="questions">Questions</h3> <p><strong>In which part of the Von Neumann architecture are the code and data required for a program to run stored?</strong></p> <p><em>Answer: <code class="language-plaintext highlighter-rouge">Memory</code></em></p> <p><strong>What part of the CPU stores small amounts of data?</strong></p> <p><em>Answer: <code class="language-plaintext highlighter-rouge">Registers</code></em></p> <p><strong>In which unit are arithmetic operations performed?</strong></p> <p><em>Answer: <code class="language-plaintext highlighter-rouge">Arithmetic Logic Unit</code></em></p> <h2 id="task-3---registers-overview">Task 3 - Registers Overview</h2> <p>Like said before, registers are the CPU’s storage medium and data can be accessed quickier than from any other memory. However, it’s limited size means it has to be used effectively. For this purpose, registers are divided into the following different types:</p> <ul> <li>Instruction Pointer</li> <li>General Purpose Registers</li> <li>Status Flag Registers</li> <li>Segment Registers</li> </ul> <h3 id="instruction-pointer">Instruction Pointer</h3> <p>The Intstruction Pointer or Program Counter is a registers that contains the address of the next instruction to be exeucted by the CPU. It was originally a 16-bit register and was abbreviated as IP. In 32-bit processors, it became a 32-bit register called EIP for Extended Instruction Pointer. In 64-bit systems, this register became a 64-bit register called RIP (the R here stands for register).</p> <h3 id="general-purpose-registers">General-Purpose Registers</h3> <p>These registers are all 32-bit registers or 64-bit in 64bit systems. They contains:</p> <ul> <li> <strong>EAX/RAX</strong>: It is the Accumulator Register. Results of arithmetic operations are often stored in this register. RAX is a 64-bit register and EAX a 32-bit one. The last 16 bits can be accessed by addressing AX. Higher 8 bits can be accessed via AH and lower ones by using AL. These rules also apply to the RBX, RCX and RDX registers, just change the A letter by B, C or D.</li> <li> <strong>EBX/RBX</strong>: This register is also called the Base Register, which is often used to store base addresses in memory operations. Memory addresses are commonly accessed using a combination of a base addess and an offset.</li> <li> <strong>ECX/RCX</strong>: This register is also called the Counter Register and is often used in counting operations such as loops or string operations…</li> <li> <strong>EDX/RDX</strong>: This register is also called the Data Register and is often used in multiplication/division operations.</li> <li> <strong>ESP/RSP</strong>: This register is called the Stack Pointer and holds the memory address of the top of the stack and and is used in conjunction with the Stack Segment register. SS Register, on the other hand, contains the base address of the stack. It is a 32-bit register called ESP in 32-bit systems and a 64-bit register called RSP in 64-bit systems. It cannot be addressed as smaller registers, and this rule is valuable for EBP, ESI and RDI.</li> <li> <strong>EBP/RBP</strong>: This register is called the Base Pointer and is used to serves as a reference point for accessing data within the stack frame using relative offsets. A stack frame is a block of memory allocated on the stack to manage function execution, containing local variables, function parameters, saved registers, and a return address. It is also used in conjunction with the Stack Segment register.</li> <li> <strong>ESI/RSI</strong>: This register is called the Source Index and is used for string operations by holding the source address from where data is read or copied. It is used with the Data Segment register as an offset.</li> <li> <strong>EDI/RDI</strong>: This register is called the destination Index resgister and also used for string operation by holding the destination address where data is written or copied. It is used with the Extra Segment register as an offset.</li> <li> <strong>R8-R15</strong>: These are 64-bit only GP registers and are not present in 32-bit systems. They are also addressable in 32-bit, 16-bit, and 8-bit modes. For example, for the R8 register, we can use R8D for lower 32-bit addressing, R8W for lower 16-bit addressing, and R8B for lower 8-bit addressing. Here, the suffix D stands for Double-word, W stands for Word, and B stands for Byte.</li> </ul> <p>The picture below is the summary of all GP Registers:</p> <figure> <picture> <img src="/assets/img/images/thm_x86_architecture_overview/HJspqhAyC.png" class="img-fluid rounded z-depth-1 bg-white" width="100%" height="auto" title="GP Registers Summary" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <h3 id="questions-1">Questions</h3> <p><strong>Which register holds the address to the next instruction that is to be executed?</strong></p> <p><em>Answer: <code class="language-plaintext highlighter-rouge">Instruction Pointer</code></em></p> <p>Which register in a 32-bit system is also called the Counter Register?</p> <p><em>Answer: <code class="language-plaintext highlighter-rouge">ECX</code></em></p> <p>Which registers from the ones discussed above are not present in a 32-bit system?</p> <p><em>Answer: <code class="language-plaintext highlighter-rouge">R8-R15</code></em></p> <h2 id="task-4---registers-continued">Task 4 - Registers Continued</h2> <h3 id="status-flag-registers">Status Flag Registers</h3> <p>When performing execution, some indication about the status of the execution is sometimes neccessary. This is where Status Flags come in. In 32-bit systems, this is a single 32-bit register called EFLAGS and in 64-bits ones, this is exetended to 64 bits and called RFLAGS.</p> <ul> <li> <strong>Zero Flag</strong>: Denoted by ZF, it indicates when the result of the last executed instruction was zero. In example, <code class="language-plaintext highlighter-rouge">sub rax, rax -&gt; ZF=1</code>.</li> <li> <strong>Cary Flag</strong>: Denoted by CF, it indicates when the las executed instruction resulted in a too big or too small number for the destination. In example, 0xFFFFFFFF + 0x00000001 -&gt; CF=1.</li> <li> <strong>Sign Flag</strong>: Denoted by SF, it indicates if the result of an operation is negative or the most significat bit is set to 1.</li> <li> <strong>Trap Flag</strong>: Denoted by TF, it indicates whether the processor is in single-step mode, causing the CPU to execute one instruction at a time.</li> </ul> <h3 id="segment-registers">Segment Registers</h3> <p>Segment Registers are 16-bits registers that divide the memory space into different segment for easier addressing.</p> <ul> <li> <strong>Code Segment</strong>: The Code Segment (CS ) register points to the Code section in the memory.</li> <li> <strong>Data Segment</strong>: The Data Segment (DS) register points to the program’s data section in the memory.</li> <li> <strong>Stack Segment</strong>: The Stack Segment (SS) register points to the program’s Stack in the memory.</li> <li> <strong>Extra Segments</strong> (ES, FS, and GS): These extra segment registers point to different data sections. These and the DS register divide the program’s memory into four distinct data sections.</li> </ul> <p>Here is a summary of the different mainly used registers available.</p> <table> <thead> <tr> <th style="text-align: center">General Registers</th> <th style="text-align: center">Segment Registers</th> <th style="text-align: center">Status Registers</th> <th style="text-align: center">Instruction Pointer</th> </tr> </thead> <tbody> <tr> <td style="text-align: center">RAX, EAX, AX, AH, AL</td> <td style="text-align: center">CS</td> <td style="text-align: center">EFLAGS</td> <td style="text-align: center">EIP, RIP</td> </tr> <tr> <td style="text-align: center">RBX, EBX, BX, BH, BL</td> <td style="text-align: center">SS</td> <td style="text-align: center"> </td> <td style="text-align: center"> </td> </tr> <tr> <td style="text-align: center">RCX, ECX, CX, CH, CL</td> <td style="text-align: center">DS</td> <td style="text-align: center"> </td> <td style="text-align: center"> </td> </tr> <tr> <td style="text-align: center">RDX, EDX, DX, DH, DL</td> <td style="text-align: center">ES</td> <td style="text-align: center"> </td> <td style="text-align: center"> </td> </tr> <tr> <td style="text-align: center">RBP, EBP, BP</td> <td style="text-align: center">FS</td> <td style="text-align: center"> </td> <td style="text-align: center"> </td> </tr> <tr> <td style="text-align: center">RSP, ESP, SP</td> <td style="text-align: center">GS</td> <td style="text-align: center"> </td> <td style="text-align: center"> </td> </tr> <tr> <td style="text-align: center">RSI, ESI, SI</td> <td style="text-align: center"> </td> <td style="text-align: center"> </td> <td style="text-align: center"> </td> </tr> <tr> <td style="text-align: center">RDI, EDI, DI</td> <td style="text-align: center"> </td> <td style="text-align: center"> </td> <td style="text-align: center"> </td> </tr> <tr> <td style="text-align: center">R8-R15</td> <td style="text-align: center"> </td> <td style="text-align: center"> </td> <td style="text-align: center"> </td> </tr> </tbody> </table> <h3 id="questions-2">Questions</h3> <p><strong>Which flag is used by the program to identify if it is being run in a debugger?</strong></p> <p><em>Answer: <code class="language-plaintext highlighter-rouge">Trap Flag</code></em></p> <p><strong>Which flag will be set when the most significant bit in an operation is set to 1?</strong></p> <p><em>Answer: <code class="language-plaintext highlighter-rouge">Sign Flag</code></em></p> <p><strong>Which Segment register contains the pointer to the code section in memory?</strong></p> <p><em>Answer: <code class="language-plaintext highlighter-rouge">Code Segment</code></em></p> <h2 id="task-5---memory-overview">Task 5 - Memory Overview</h2> <p>When a program is loaded into the memory of an OS, it sees an abstracted view of memory. This means that the program does not have access to the full memory; instead it only has access to its own memory and for it, it is all the memory it needs to operate. Here, we are looking at the memory as a program sees it.</p> <p>Memory can be devided into different section, named Stack, Heap, Code and Data.</p> <ul> <li> <strong>Code</strong>: This section contains the program’s code. Specifically, this section refers to the text section in a Portable Executable (PE) file, which includes instructions executed by the CPU. This section of memory has execute permissions, meaning that the CPU can execute the data here.</li> <li> <strong>Data</strong>: This section contains initialized data that is constant. This section refers to the data section in a PE file. It often contains global variables and other data that are not supposed to change during the program execution.</li> <li> <strong>Heap</strong>: This section is also known as Dynamic Memory, contains variables and data created and destroyed during program execution. When a variable is created, memory is allocated for that variable at runtime and when that variable is deleted, the memory is freed.</li> <li> <strong>Stack</strong>: This section contains local variables, arguments passed onto the program and the return address of the parent process that called the program. Since the return address is related to the control flow of CPU’s instructions, the stack is often targeted by malware to hijack it.</li> </ul> <h3 id="questions-3">Questions</h3> <p><strong>When a program is loaded into Memory, does it have a full view of the system memory? Y or N?</strong></p> <p><em>Answer: <code class="language-plaintext highlighter-rouge">N</code></em></p> <p><strong>Which section of the Memory contains the code?</strong></p> <p><em>Answer: <code class="language-plaintext highlighter-rouge">Code</code></em></p> <p><strong>Which Memory section contains information related to the program’s control flow?</strong></p> <p><em>Answer: <code class="language-plaintext highlighter-rouge">Stack</code></em></p> <h2 id="task-6---stack-layout">Task 6 - Stack Layout</h2> <p>The Stack is a part of a program’s memory that contains the arguments passed to the program, the local variables, and the program’s control flow. This makes the stack very important regarding malware analysis and reverse engineering. Malware often exploits the stack to hijack the control flow of the program.</p> <p>The stack is a Last In First Out (LIFO) memory. This means the last element pushed onto the stack will be the first one to be popped out.</p> <table> <thead> <tr> <th style="text-align: center">Pushed order</th> <th style="text-align: center">Popped order</th> </tr> </thead> <tbody> <tr> <td style="text-align: center">A, B, C</td> <td style="text-align: center">C, B, A</td> </tr> </tbody> </table> <p>The two registers to keep track of the stack are the Stack Pointer (ESP/RSP) and Base Pointer (EBP/RBP).</p> <ul> <li> <strong>Stack Pointer</strong>: It points to the top of the stack, when any new element is pushed on the stack, the location of the SP changes to consider the new element and does the same thing when an element is popped out.</li> <li> <strong>Base Pointer</strong>: It remains constant for any program. This is the reference address where the current program stack tracks its local variables and arguments.</li> <li> <strong>Arguments</strong>: Arguments being passed to a function are pushed to the stack before the function starts execution. These arguments are present right below the Return Address on the stack.</li> </ul> <h3 id="old-base-pointer-and-return-address">Old Base Pointer and Return Address</h3> <p>Below the BP lies the old Base Pointer of the program that calls the current program and below the oBP lies the Return Address, where the Instruction Pointer will return once the current program’s execution ends.<br> A common technique to hijack the control flow is to overflow a local variable on the stack such that it overwrites the Return Address ith an address of the malware author’s choice. This technique is called a Stack Buffer Overflow.</p> <h3 id="function-prologue-and-epilogue">Function Prologue and Epilogue</h3> <p>When a function is called, the stack is prepared for the function to be executed. This means that the arguments are pushed to the stack before the function execution. After that, Return Address and old Base Pointer are pushed onto the stack. Once these elements are pushed, the Base Pointer is pushed into the stack. As the function executes, the Stack Pointer, which pointed to BP, now moves as the requirement of the function. This portion of code is called the Function Prologue.</p> <p>Similarly, the oBP is pushed into the BP when the function exits. The Return Address is pushed into the Instruction Pointer and the Stack pointer is rearranged to point to the top of the stack. This portion of code is called the Function Epilogue.</p> <figure> <picture> <img src="/assets/img/images/thm_x86_architecture_overview/ryr5vkkxA.png" class="img-fluid rounded z-depth-1 bg-white" width="100%" height="auto" title="Stack Diagram" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <h3 id="question">Question</h3> <p><strong>Follow the instructions in the attached static site and find the flag. What is the flag?</strong></p> <p>Copy the Stack Diagram.</p> <p><em>Answer <code class="language-plaintext highlighter-rouge">THM{SMASHED_THE_STACK}</code></em></p> <h2 id="task-7---conclusion">Task 7 - Conclusion</h2> <p>In this room, we explored the fundamental components of x86 CPU architecture, including the Von Neumann model, CPU components such as ALU and Control Unit, various types of registers, memory layout, and the organization of the stack.<br> Understanding these concepts is crucial for analyzing malware behavior and gaining insights into system operations. By grasping the role of registers, memory sections, and stack layout, one can delve deeper into computer architecture and enhance their skills in cybersecurity and reverse engineering.</p> </div> </article> <br> <hr> <br> <ul class="list-disc pl-8"></ul> <h2 class="text-3xl font-semibold mb-4 mt-12">Enjoy Reading This Article?</h2> <p class="mb-2">Here are some more articles you might like to read next:</p> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2024/THM-x86-Assembly-Crash-Course/">THM x86 Assembly Crash Course</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2024/THM-Windows-Internals/">THM Windows Internals</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2024/THM-Identity-and-Access-Management/">THM Identity and Access Management</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2024/THM-Introduction-to-Cryptography/">THM Introduction to Cryptography</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2024/THM-Governance-&amp;-Regulation/">THM Governance &amp; Regulation</a> </li> </div> </div> </div> </div> <footer class="fixed-bottom" role="contentinfo"> <div class="container mt-0"> © Copyright 2024 NonoHM . Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script defer src="/assets/js/bootstrap-toc.min.js?c82ff4de8b0955d6ff14f5b05eed7eb6"></script> <script src="/assets/js/no_defer.js?2930004b8d7fcd0a8e00fdcfc8fc9f24"></script> <script defer src="/assets/js/common.js?da39b660470d1ba6e6b8bf5f37070b6e"></script> <script defer src="/assets/js/copy_code.js?12775fdf7f95e901d7119054556e495f" type="text/javascript"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script> <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> </body> </html>